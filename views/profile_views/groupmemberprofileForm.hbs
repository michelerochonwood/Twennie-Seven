{{#*inline "title"}}Group Member Profile Form | Twennie{{/inline}}
<div class="profile-form-container">
  
  <h2 class="profile-form-title">edit profile</h2>

  <form 
    action="/profile/groupmember/{{profile.groupMemberId}}/update" 
    method="POST" 
    class="profile-form" 
    enctype="multipart/form-data"
  >
    <!-- CSRF Token -->
    {{#if csrfToken}}
      <input type="hidden" name="_csrf" value="{{csrfToken}}">
    {{/if}}

    <!-- Current Profile Image -->
    {{#if profile.profileImage}}
      <div class="form-field">
        <label>Current Profile Image</label>
        <img 
          src="{{profile.profileImage}}" 
          alt="Profile Image" 
          style="width: 120px; height: auto; border-radius: 8px; margin-top: 8px;"
        >
      </div>
    {{/if}}

    <!-- Upload New Profile Image (Cloudinary Upload) -->
    <div class="form-field">
      <label for="profileImage">Upload New Profile Image</label>
      <input 
        type="file" 
        id="profileImage" 
        name="profileImage" 
        accept="image/*"
      >
      <p class="form-hint">Your new image will be uploaded to Cloudinary when saved.</p>
    </div>

    <!-- Name -->
    <div class="form-field">
      <label for="name">Name</label>
      <input 
        type="text" 
        id="name" 
        name="name" 
        value="{{profile.name}}" 
        required
      >
    </div>

    <!-- Professional Title -->
    <div class="form-field">
      <label for="professionalTitle">Professional Title</label>
      <input 
        type="text" 
        id="professionalTitle" 
        name="professionalTitle" 
        value="{{profile.professionalTitle}}" 
        required
      >
    </div>

    <!-- Biography -->
    <div class="form-field">
      <label for="biography">Biography</label>
      <textarea 
        id="biography" 
        name="biography"
      >{{profile.biography}}</textarea>
    </div>

    <!-- Learning Goals -->
    <div class="form-field">
      <label for="goals">Learning Goals</label>
      <textarea 
        id="goals" 
        name="goals"
      >{{profile.goals}}</textarea>
    </div>

    <!-- Group Topics Display (Read-Only) -->
    <div class="groupmember-group-topics-container">
      <h3 class="groupmember-group-topics-title">Your Group's Topics (Set by Leader)</h3>
      <ul class="groupmember-group-topics-list">
        <li>{{groupTopics.topic1}}</li>
        <li>{{groupTopics.topic2}}</li>
        <li>{{groupTopics.topic3}}</li>
      </ul>
    </div>

    <!-- Topic Selection Instructions -->
    <p class="groupmember-topic-instructions">
      Your leader has chosen three topics for your group (shown above).  
      You can also choose <strong>three topics of your own</strong> from the dropdowns below.  
      <strong>Your selections will not change the groupâ€™s topics.</strong>
    </p>

    <!-- Personal Topics (Editable) -->
    <div class="form-field">
      <label for="topic1">Your Topic 1</label>
      <select id="topic1" name="topics[topic1]" required>
        {{#each allTopics}}
          <option 
            value="{{this}}" 
            {{#if (eq this ../profile.topics.topic1)}}selected{{/if}}
          >
            {{this}}
          </option>
        {{/each}}
      </select>
    </div>

    <div class="form-field">
      <label for="topic2">Your Topic 2</label>
      <select id="topic2" name="topics[topic2]" required>
        {{#each allTopics}}
          <option 
            value="{{this}}" 
            {{#if (eq this ../profile.topics.topic2)}}selected{{/if}}
          >
            {{this}}
          </option>
        {{/each}}
      </select>
    </div>

    <div class="form-field">
      <label for="topic3">Your Topic 3</label>
      <select id="topic3" name="topics[topic3]" required>
        {{#each allTopics}}
          <option 
            value="{{this}}" 
            {{#if (eq this ../profile.topics.topic3)}}selected{{/if}}
          >
            {{this}}
          </option>
        {{/each}}
      </select>
    </div>

    <!-- Submit Button -->
    <div class="form-buttons">
      <button type="submit" class="form-button submit-button">save changes</button>
    </div>

  </form>

</div>







